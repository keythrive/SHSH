<!DOCTYPE html><html><head>
      <title>README</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="file:///c:\Users\horikawa.keitaro\.vscode\extensions\shd101wyy.markdown-preview-enhanced-0.8.11\crossnote\dependencies\katex\katex.min.css">
      
      
      
      
      
      <style>
      code[class*=language-],pre[class*=language-]{color:#333;background:0 0;font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.4;-moz-tab-size:8;-o-tab-size:8;tab-size:8;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:.8em;overflow:auto;border-radius:3px;background:#f5f5f5}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal;background:#f5f5f5}.token.blockquote,.token.comment{color:#969896}.token.cdata{color:#183691}.token.doctype,.token.macro.property,.token.punctuation,.token.variable{color:#333}.token.builtin,.token.important,.token.keyword,.token.operator,.token.rule{color:#a71d5d}.token.attr-value,.token.regex,.token.string,.token.url{color:#183691}.token.atrule,.token.boolean,.token.code,.token.command,.token.constant,.token.entity,.token.number,.token.property,.token.symbol{color:#0086b3}.token.prolog,.token.selector,.token.tag{color:#63a35c}.token.attr-name,.token.class,.token.class-name,.token.function,.token.id,.token.namespace,.token.pseudo-class,.token.pseudo-element,.token.url-reference .token.variable{color:#795da3}.token.entity{cursor:help}.token.title,.token.title .token.punctuation{font-weight:700;color:#1d3e81}.token.list{color:#ed6a43}.token.inserted{background-color:#eaffea;color:#55a532}.token.deleted{background-color:#ffecec;color:#bd2c00}.token.bold{font-weight:700}.token.italic{font-style:italic}.language-json .token.property{color:#183691}.language-markup .token.tag .token.punctuation{color:#333}.language-css .token.function,code.language-css{color:#0086b3}.language-yaml .token.atrule{color:#63a35c}code.language-yaml{color:#183691}.language-ruby .token.function{color:#333}.language-markdown .token.url{color:#795da3}.language-makefile .token.symbol{color:#795da3}.language-makefile .token.variable{color:#183691}.language-makefile .token.builtin{color:#0086b3}.language-bash .token.keyword{color:#0086b3}pre[data-line]{position:relative;padding:1em 0 1em 3em}pre[data-line] .line-highlight-wrapper{position:absolute;top:0;left:0;background-color:transparent;display:block;width:100%}pre[data-line] .line-highlight{position:absolute;left:0;right:0;padding:inherit 0;margin-top:1em;background:hsla(24,20%,50%,.08);background:linear-gradient(to right,hsla(24,20%,50%,.1) 70%,hsla(24,20%,50%,0));pointer-events:none;line-height:inherit;white-space:pre}pre[data-line] .line-highlight:before,pre[data-line] .line-highlight[data-end]:after{content:attr(data-start);position:absolute;top:.4em;left:.6em;min-width:1em;padding:0 .5em;background-color:hsla(24,20%,50%,.4);color:#f4f1ef;font:bold 65%/1.5 sans-serif;text-align:center;vertical-align:.3em;border-radius:999px;text-shadow:none;box-shadow:0 1px #fff}pre[data-line] .line-highlight[data-end]:after{content:attr(data-end);top:auto;bottom:.4em}html body{font-family:'Helvetica Neue',Helvetica,'Segoe UI',Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#333;background-color:#fff;overflow:initial;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#000}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#5c5c5c}html body strong{color:#000}html body del{color:#5c5c5c}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ol,html body>ul{margin-bottom:16px}html body ol,html body ul{padding-left:2em}html body ol.no-list,html body ul.no-list{padding:0;list-style-type:none}html body ol ol,html body ol ul,html body ul ol,html body ul ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#5c5c5c;background-color:#f0f0f0;border-left:4px solid #d6d6d6}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#d6d6d6;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:700;color:#000}html body table td,html body table th{border:1px solid #d6d6d6;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:700}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em;color:#000;background-color:#f0f0f0;border-radius:3px;padding:.2em 0}html body code::after,html body code::before{letter-spacing:-.2em;content:'\00a0'}html body pre>code{padding:0;margin:0;word-break:normal;white-space:pre;background:0 0;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;line-height:1.45;border:#d6d6d6;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:after,html body pre code:before,html body pre tt:after,html body pre tt:before{content:normal}html body blockquote,html body dl,html body ol,html body p,html body pre,html body ul{margin-top:0;margin-bottom:16px}html body kbd{color:#000;border:1px solid #d6d6d6;border-bottom:2px solid #c7c7c7;padding:2px 4px;background-color:#f0f0f0;border-radius:3px}@media print{html body{background-color:#fff}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#000;page-break-after:avoid}html body blockquote{color:#5c5c5c}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body code,html body pre{word-wrap:break-word;white-space:pre}}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview ul{list-style:disc}.markdown-preview ul ul{list-style:circle}.markdown-preview ul ul ul{list-style:square}.markdown-preview ol{list-style:decimal}.markdown-preview ol ol,.markdown-preview ul ol{list-style-type:lower-roman}.markdown-preview ol ol ol,.markdown-preview ol ul ol,.markdown-preview ul ol ol,.markdown-preview ul ul ol{list-style-type:lower-alpha}.markdown-preview .newpage,.markdown-preview .pagebreak{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center!important}.markdown-preview:not([data-for=preview]) .code-chunk .code-chunk-btn-group{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .status{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .output-div{margin-bottom:16px}.markdown-preview .md-toc{padding:0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link div,.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}.markdown-preview .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0;min-height:100vh}@media screen and (min-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px + 2em)}}@media screen and (max-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{font-size:14px!important;padding:1em}}@media print{html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc{padding:0 16px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link div,html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% - 300px);padding:2em calc(50% - 457px - 300px / 2);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */

      </style>
      <!-- The content below will be included at the end of the <head> element. --><script type="text/javascript">
  document.addEventListener("DOMContentLoaded", function () {
    // your code here
  });
</script></head><body for="html-export">
    
    
      <div class="crossnote markdown-preview  ">
      
<h3 id="shibata-senior-high-school-hands-on">Shibata Senior High School Hands-on </h3>
<hr>
<center>
<h1 id="講義ノート----omit-in-toc--">講義ノート  <!-- omit in toc --> </h1>
<h2 id="新潟県立新発田高等学校---omit-in-toc--">新潟県立新発田高等学校 <!-- omit in toc --> </h2>
<h4 id="研修名-課題研究のための情報処理---omit-in-toc--">研修名： 課題研究のための情報処理 <!-- omit in toc --> </h4>
<h4 id="2024219火-1410-1650--新発田高等学校---omit-in-toc--">2024/2/19(火) 14:10-16:50 @ 新発田高等学校 <!-- omit in toc --> </h4>
<h4 id="講師-開志専門職大学-情報学部-堀川-桂太郎---omit-in-toc--">講師：　開志専門職大学　情報学部　堀川 桂太郎 <!-- omit in toc --> </h4>
</center>
<hr>
<h2 id="目次---omit-in-toc--">目次 <!-- omit in toc --> </h2>
<ul>
<li><a href="#%E9%AB%98%E6%A0%A1%E7%94%9F%E3%81%AE%E8%AA%B2%E9%A1%8C%E6%8E%A2%E6%B1%82%E5%9E%8B%E5%AD%A6%E7%BF%92%E3%81%AB%E5%90%91%E3%81%91%E3%81%A6">高校生の課題探求型学習に向けて</a>
<ul>
<li><a href="#%E8%AA%B2%E9%A1%8C%E6%8E%A2%E6%B1%82%E5%9E%8B%E3%81%AE%E9%87%8D%E8%A6%81%E6%80%A7">課題探求型の重要性</a></li>
</ul>
</li>
<li><a href="#%E6%9C%AC%E7%A0%94%E4%BF%AE%E3%81%AE%E6%A6%82%E8%A6%81">本研修の概要</a></li>
<li><a href="#%E7%9B%AE%E7%9A%84%E6%9C%AC%E6%97%A5%E3%81%8A%E6%8C%81%E3%81%A1%E5%B8%B0%E3%82%8A%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%9F%E3%81%84%E3%82%B9%E3%82%AD%E3%83%AB">目的：本日お持ち帰りいただきたいスキル</a></li>
<li><a href="#%E6%BC%94%E7%BF%92%E5%86%85%E5%AE%B9">演習内容</a></li>
<li><a href="#%E4%BA%8B%E5%89%8D%E6%BA%96%E5%82%99">事前準備</a></li>
<li><a href="#%E4%BA%88%E7%BF%92%E8%87%AA%E4%B8%BB%E3%83%88%E3%83%AC">予習、自主トレ</a></li>
<li><a href="#%E3%83%86%E3%83%BC%E3%83%9E0--python%E3%81%A7%E3%82%AF%E3%83%A9%E3%82%B7%E3%83%83%E3%82%AF%E9%9F%B3%E6%A5%BD%E5%8B%95%E7%94%BB%E5%86%8D%E7%94%9F">テーマ0.  Pythonでクラシック音楽・動画再生</a></li>
<li><a href="#%E3%83%86%E3%83%BC%E3%83%9E1--colab%E3%81%A7-the-laughing-man">テーマ1.  Colabで The Laughing Man</a></li>
<li><a href="#%E3%83%86%E3%83%BC%E3%83%9E2--%E7%8F%BE%E5%9C%A8%E5%9C%B0%E3%81%AE%E8%BF%91%E5%82%8D%E5%9C%B0%E5%9B%B3--%E6%93%8D%E4%BD%9C%E8%AA%AC%E6%98%8E%E3%81%A7%E4%BD%BF%E7%94%A8">テーマ2.  現在地の近傍地図  操作説明で使用</a></li>
<li><a href="#%E3%83%86%E3%83%BC%E3%83%9E3--%E7%90%83%E3%81%AE%E4%BD%93%E7%A9%8D%E3%83%A2%E3%83%B3%E3%83%86%E3%82%AB%E3%83%AB%E3%83%AD%E6%B3%95--%E3%83%8F%E3%83%B3%E3%82%BA%E3%82%AA%E3%83%B31">テーマ3.  球の体積、モンテカルロ法  ハンズオン1</a></li>
<li><a href="#%E3%83%86%E3%83%BC%E3%83%9E4--python%E3%81%A7-3d%E3%82%B0%E3%83%A9%E3%83%95%E8%A1%A8%E7%A4%BA">テーマ4.  Pythonで 3Dグラフ表示</a></li>
<li><a href="#%E3%83%86%E3%83%BC%E3%83%9E5--wordcloud-%E3%83%AF%E3%83%BC%E3%83%89%E3%82%AF%E3%83%A9%E3%82%A6%E3%83%89--%E3%83%8F%E3%83%B3%E3%82%BA%E3%82%AA%E3%83%B32">テーマ5.  WordCloud ワードクラウド  ハンズオン2</a></li>
<li><a href="#%E3%83%86%E3%83%BC%E3%83%9E6-%E6%AC%B2%E3%81%97%E3%81%84%E3%83%87%E3%83%BC%E3%82%BF%E3%81%AF%E8%87%AA%E5%88%86%E3%81%A7%E4%BD%9C%E3%82%8Bmcmc-%E3%83%8F%E3%83%B3%E3%82%BA%E3%82%AA%E3%83%B33a--%E3%83%8F%E3%83%B3%E3%82%BA%E3%82%AA%E3%83%B33b">テーマ6. 欲しいデータは自分で作る（MCMC） ハンズオン3a , ハンズオン3b</a></li>
<li><a href="#%E3%83%86%E3%83%BC%E3%83%9E7--%E9%87%8F%E5%AD%90%E3%83%86%E3%83%AC%E3%83%9D%E3%83%BC%E3%83%86%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%A3%E3%81%A6%E4%BD%95">テーマ7.  量子テレポーテーションって何？</a></li>
<li><a href="#%E3%83%86%E3%83%BC%E3%83%9E8--%E6%9C%80%E9%81%A9%E5%8C%96%E5%95%8F%E9%A1%8C%E3%82%92%E7%89%A9%E7%90%86%E6%B3%95%E5%89%87%E3%81%A7%E8%A7%A3%E3%81%84%E3%81%A6%E3%82%82%E3%82%89%E3%81%86">テーマ8.  最適化問題を物理法則で解いてもらう</a></li>
<li><a href="#%E5%8F%82%E8%80%83qiita%E3%82%B5%E3%82%A4%E3%83%88%E3%81%B8%E3%81%AE%E5%9F%B7%E7%AD%86%E8%A8%98%E4%BA%8B">参考：　Qiitaサイトへの執筆記事</a></li>
</ul>
<hr>
<div style="page-break-before:always"></div>
<h2 id="高校生の課題探求型学習に向けて">高校生の課題探求型学習に向けて </h2>
<h3 id="課題探求型の重要性">課題探求型の重要性 </h3>
<h3 id="現状に満足せず-妥協しない-成長と挑戦の源泉----omit-in-toc--">現状に満足せず、妥協しない、成長と挑戦の源泉  <!-- omit in toc --> </h3>
<ul>
<li>問題解決、よりも、<strong>問題発見</strong>が難しい</li>
<li>金鉱採掘、よりも、<strong>金脈発見</strong>が難しい</li>
<li>仕事をこなす/探す、よりも、<strong>雇用をつくる</strong>ことが難しい</li>
</ul>
<h3 id="探求の効能----omit-in-toc--">探求の効能  <!-- omit in toc --> </h3>
<ul>
<li><strong>能動アウトプット型の自己成長</strong>　：受動インプット型より，はるかに高い教育効果</li>
<li>すべての若者達へ：　　<strong>失敗を恐れず，挑戦する実行力</strong></li>
<li>優れたアイディアを真似するのは簡単だが，<strong>卓越した実行力</strong>を模倣することは困難を極める（ルイス・ガースナー）</li>
</ul>
<h3 id="課題の探求方法---omit-in-toc--">課題の探求方法 <!-- omit in toc --> </h3>
<ul>
<li>発明好きの発想</li>
<li>好奇心と観察</li>
<li>多様な視点,　異文化融合</li>
</ul>
<h3 id="課題探求に必要な資質---omit-in-toc--">課題探求に必要な資質 <!-- omit in toc --> </h3>
<ul>
<li>面白い、不思議、と思う感受性</li>
<li>困っている人を助ける視点</li>
<li>知らないことを知りたい：知的欲求</li>
<li>普通と違うユニークな視点を受容する広い視野、寛容性</li>
</ul>
<hr>
<div style="page-break-before:always"></div>
<h2 id="本研修の概要">本研修の概要 </h2>
<ul>
<li>
<p>2024年度 <strong>総合的な探求の時間</strong>に役立つ情報処理プラクティス</p>
</li>
<li>
<p>2025年共通テストに、<strong>情報Ⅰ</strong>が追加される背景事情</p>
</li>
<li>
<p>高校生の探究活動へ展開・応用</p>
</li>
<li>
<p>インターネット接続されたPC、Webブラウザの対話作業</p>
</li>
<li>
<p>データ分析、実践的Pythonプログラミング～初級中級ハンズオン～</p>
</li>
<li>
<p>生成AIを副操縦士としたプログラミング</p>
</li>
<li>
<p>本日のアジェンダ：　<a href="https://github.com/keythrive/SHSH/blob/main/%E6%9C%AC%E6%97%A5%E3%82%A2%E3%82%B8%E3%82%A7%E3%83%B3%E3%83%80A%E6%A1%88.pdf">こちらをご覧ください</a></p>
</li>
</ul>
<h2 id="目的本日お持ち帰りいただきたいスキル">目的：本日お持ち帰りいただきたいスキル </h2>
<ul>
<li>「こんなことできるのかな？」　⇒　「<strong>やればできる</strong>」を実感する</li>
<li>目的・要件⇒デザイン　⇒　PoC確認まで30分</li>
<li>ちょこっとPython: スキマ時間に簡単お手軽プログラミング</li>
<li>Holiday Coding:　家族に自慢できるPython使い</li>
</ul>
<hr>
<div style="page-break-before:always"></div>
<h2 id="演習内容">演習内容 </h2>
<ul>
<li>Google Colaboratory、Microsoft Bing AI Copilotを使います</li>
<li>参加者の皆様のペース配分を見ながら</li>
<li>1セッション30分程度でハンズオン × 3セッション行います</li>
<li>1セッション30分でコーディング＆動作確認まで実施します</li>
<li>Python初心者はペアプログラミング等follow体制を考えます</li>
<li>下記はイメージです: リストから選んで演習します</li>
<li>自由課題、カスタマイズ、アレンジはご自由に、いつでも実施可能です</li>
</ul>
<table>
<thead>
<tr>
<th></th>
<th>学習項目</th>
<th>概要、方法</th>
<th>ノートブックファイル</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
<td>ハンズオンで演習予定</td>
<td></td>
</tr>
<tr>
<td>0</td>
<td>地図と現在地</td>
<td>現在地点の拡大縮小可能な地図を表示</td>
<td><a href="https://github.com/keythrive/SHSH/blob/main/notebooks/Address2GeoLL.ipynb">操作説明で使用</a></td>
</tr>
<tr>
<td>1</td>
<td>3D表現</td>
<td>3Dプリンタの積層方式で図形を立体化<br>3D空間にランダムな点描画で球を表現、球の体積を試算</td>
<td><a href="https://github.com/keythrive/SHSH/blob/main/notebooks/Funny_3D.ipynb">ハンズオン1</a></td>
</tr>
<tr>
<td>2</td>
<td>WordCloud</td>
<td>（国語、英語の先生方向け）<br>テキストで頻出する単語を視覚表現</td>
<td><a href="https://github.com/keythrive/SHSH/blob/main/notebooks/TFIDF_WordCloud.ipynb">ハンズオン2</a></td>
</tr>
<tr>
<td>3</td>
<td>データ分析・データ生成</td>
<td>生成AIに訊く：創造主は確率でデータを創造する?</td>
<td><a href="https://github.com/keythrive/SHSH/blob/main/notebooks/MC_Random.ipynb">ハンズオン3a</a> <br> <a href="https://github.com/keythrive/SHSH/blob/main/notebooks/Ja_En_Mt_sampling.ipynb">ハンズオン3b</a></td>
</tr>
<tr>
<td></td>
<td></td>
<td>以下は自由課題</td>
<td></td>
</tr>
<tr>
<td>4</td>
<td>姿勢推定／顔の中心位置検出</td>
<td>Colabで <strong>The Laughing Man2024/02</strong></td>
<td><a href="https://github.com/keythrive/SHSH/blob/main/notebooks/LaughingMan202402.ipynb">自由課題1</a></td>
</tr>
<tr>
<td>5</td>
<td>Pythonでクラシック音楽、動画再生</td>
<td>クラウド環境でPython実行しWebで音楽・動画再生</td>
<td></td>
</tr>
<tr>
<td>6</td>
<td>量子ゲート</td>
<td>量子テレポーテーションって何？</td>
<td><a href="https://github.com/keythrive/SHSH/blob/main/notebooks/Q_teleport.ipynb">自由課題2</a></td>
</tr>
<tr>
<td>8</td>
<td>最適化問題の量子的求解</td>
<td>8-Queen</td>
<td>自由課題3</td>
</tr>
</tbody>
</table>
<hr>
<div style="page-break-before:always"></div>
<h2 id="事前準備">事前準備 </h2>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th>項目</th>
<th>作業</th>
<th style="text-align:center">チェック</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td>Microsoftアカウント取得</td>
<td>Windows10 ログイン</td>
<td style="text-align:center">✓</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td>WebブラウザEdge起動</td>
<td>ブラウザ画面を4つほど利用予定</td>
<td style="text-align:center">✓</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td>Googleアカウント取得</td>
<td>gmailサインアップ・サインイン</td>
<td style="text-align:center">✓</td>
</tr>
<tr>
<td style="text-align:center">4</td>
<td>Google Colaboratoryログイン</td>
<td><a href="https://colab.research.google.com/?hl=ja">https://colab.research.google.com/?hl=ja</a></td>
<td style="text-align:center">✓</td>
</tr>
<tr>
<td style="text-align:center">5</td>
<td>新規ノートブック作成</td>
<td>基本操作、セル実行、Markdown説明</td>
<td style="text-align:center">✓</td>
</tr>
<tr>
<td style="text-align:center">6</td>
<td>Microsoft Bing AI画面表示</td>
<td>Copilotに質問、基本操作を試す</td>
<td style="text-align:center">✓</td>
</tr>
<tr>
<td style="text-align:center">7</td>
<td>基本動作確認</td>
<td>講義用notebookファイルをDownload/Uploadして試す (<a href="https://github.com/keythrive/SHSH/tree/main/notebooks">https://github.com/keythrive/SHSH/tree/main/notebooks</a>)</td>
<td style="text-align:center">✓</td>
</tr>
<tr>
<td style="text-align:center">8</td>
<td>Pythonパッケージの事前インストール</td>
<td>（Colaboratoryで実行いただくPythonパッケージの事前インストール設定作業）</td>
<td style="text-align:center">✓</td>
</tr>
</tbody>
</table>
<ul>
<li>
<p>演習のチョイスによりますが、下記を事前に実行済状態であればスムーズに演習に入れると思います</p>
</li>
<li>
<p>下記URLからJupyterファイルをダウンロード:</p>
<p><a href="https://github.com/keythrive/SHSH/tree/main/notebooks">https://github.com/keythrive/SHSH/tree/main/notebooks</a></p>
</li>
</ul>
<hr>
<ul>
<li>Colaboratoryで実行いただくPythonパッケージの事前インストール設定作業：<br>
<strong>注意:</strong>
<ul>
<li>Colaboratoryでは、<code>pip install パッケージ名</code> で必要なパッケージをインストールできます.</li>
<li>ただしクラウド環境につき、ログアウトしたり長時間放置すると、ランタイム環境がリセットされて、一度インストールしたパッケージも消失することがあります.</li>
<li>環境がゼロリセットされることはある意味正しく便利です。やり直しがきくので。</li>
<li>毎回、パッケージをインストールできる、ことを良しとします。</li>
<li>何度もインストールしたくない、そのバージョンのパッケージを使いたい場合は別の方法があります(メモ参照)</li>
</ul>
</li>
</ul>
<pre data-role="codeBlock" data-info="" class="language-text text"><code>!pip install geopy folium plotly
!pip install xmltodict 

!apt install aptitude
!aptitude install git make curl xz-utils file -y
!aptitude install mecab libmecab-dev mecab-ipadic-utf8 -y
!apt-get -y install fonts-ipafont-gothic
!pip3 install mecab-python3==0.7
</code></pre><ul>
<li>何度もインストールしたくない場合：Google Driveにパッケージを保存する方法</li>
</ul>
<pre data-role="codeBlock" data-info="" class="language-text text"><code>from google.colab import drive
drive.mount('/content/gdrive')

package_path = '/content/gdrive/MyDrive/&lt;dir_name&gt;/my-site-packages/'
!pip install &lt;package_name&gt; --target $package_path

import sys
sys.path.append(package_path)
import &lt;package_name&gt;
</code></pre><hr>
<h2 id="予習-自主トレ">予習、自主トレ </h2>
<ul>
<li>
<p>必要に応じてPython学習環境,たとえばPyWeb集合学習、チュートリアルなど、  <a href="https://pyweb.ayax.jp/PyWeb.html#pywebver">https://pyweb.ayax.jp/PyWeb.html#pywebver</a></p>
</li>
<li>
<p>事前にざっと目を通し、予習やお試しを進めておくとよいでしょう</p>
</li>
<li>
<p>参考動画：　Google Colaboratoryの使い方</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>タイトル</th>
<th>URL</th>
<th style="text-align:center">再生時間(min)</th>
</tr>
</thead>
<tbody>
<tr>
<td>【6分で分かる】Google colaboratoryの使い方</td>
<td><a href="https://youtu.be/2tm8qrjVrk8">https://youtu.be/2tm8qrjVrk8</a></td>
<td style="text-align:center">6</td>
</tr>
<tr>
<td>Google Colaboratoryによる環境構築</td>
<td><a href="https://youtu.be/XvuZK-6QMCo">https://youtu.be/XvuZK-6QMCo</a></td>
<td style="text-align:center">5</td>
</tr>
<tr>
<td>たった1分でPythonのプログラミングを始めるGoogle Colaboratoryの使い方</td>
<td><a href="https://youtu.be/wMXhZAINYhw">https://youtu.be/wMXhZAINYhw</a></td>
<td style="text-align:center">20</td>
</tr>
<tr>
<td>Google Colaboratoryの使い方【高校情報1】</td>
<td><a href="https://youtu.be/YoDnnC9yM90">https://youtu.be/YoDnnC9yM90</a></td>
<td style="text-align:center">5</td>
</tr>
</tbody>
</table>
<hr>
<div style="page-break-before:always"></div>
<h2 id="テーマ0--pythonでクラシック音楽動画再生">テーマ0.  Pythonでクラシック音楽・動画再生 </h2>
<pre class="language-text">【実施すること】 
　・クラウド環境でPythonプログラムを作成し実行 
　・PCのWebブラウザでクラシック音楽が再生
</pre>
<ol>
<li>クラシック音楽ファイルを用意する：<br>
(例)  著作権フリーのクラシック音楽サイト:<br>
- <a href="https://mmt38.info/arrange/morzalt/">https://mmt38.info/arrange/morzalt/</a><br>
- モーツァルト「トルコ行進曲」をダウンロード<br>
- toruko.mp3 ⇒　Downloadフォルダへ</li>
<li>Colaboratoryにログイン</li>
<li>新規ノートブック作成<br>
<img src="./img/new-notebook.png" width="70%"></li>
<li>音楽ファイルをアップロード<br>
<img src="./img/upload.png" width="70%"></li>
<li>コードセル追加</li>
<li>下記コードを入力、楽曲ファイルのpath  (/content/toruko.mp3)を取得、設定<br>
<img src="./img/music_path.png" width="70%"></li>
</ol>
<pre data-role="codeBlock" data-info="Python" class="language-python Python"><code><span class="token keyword keyword-import">import</span> IPython
music_path <span class="token operator">=</span> <span class="token string">'/content/toruko.mp3'</span>
<span class="token keyword keyword-print">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'楽曲ファイル:</span><span class="token interpolation"><span class="token punctuation">{</span>music_path<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
IPython<span class="token punctuation">.</span>display<span class="token punctuation">.</span>Audio<span class="token punctuation">(</span>music_path<span class="token punctuation">)</span>
</code></pre><ol start="7">
<li>セル横の再生ボタンで、実行する<br>
<img src="./img/music-play.png" width="70%"></li>
<li>アレンジ：他の楽曲に変え、自由に楽しむ</li>
</ol>
<hr>
<pre data-role="codeBlock" data-info="" class="language-text text"><code>    【実施すること】
    　・クラウド環境でPythonプログラムを作成し実行 
    　・PCのWebブラウザで動画再生
</code></pre><ol start="0">
<li>動画ファイルを用意する：<br>
(例)  著作権フリーでダウンロード可能な動画ファイル:<br>
- <a href="https://pixabay.com/ja/videos/">https://pixabay.com/ja/videos/</a><br>
- 銀河系の動画をダウンロード　<a href="https://pixabay.com/ja/videos/%E9%8A%80%E6%B2%B3-%E8%9E%BA%E6%97%8B-%E7%84%A1%E9%99%90%E3%83%AB%E3%83%BC%E3%83%97-%E3%83%AB%E3%83%BC%E3%83%97-107129/">https://pixabay.com/ja/videos/銀河-螺旋-無限ループ-ループ-107129/</a></li>
<li>Colaboratoryにログイン</li>
<li>セッション1の続きで、新規セルの追加</li>
<li>動画ファイルをアップロード</li>
<li>動画ファイルのpath  (/content/galaxy.mp3)を取得、設定</li>
<li>下記のコードを入力し、</li>
</ol>
<pre data-role="codeBlock" data-info="Python" class="language-python Python"><code><span class="token keyword keyword-import">import</span> io<span class="token punctuation">,</span> base64
<span class="token keyword keyword-from">from</span> IPython<span class="token punctuation">.</span>display <span class="token keyword keyword-import">import</span> HTML
<span class="token keyword keyword-from">from</span> google<span class="token punctuation">.</span>colab <span class="token keyword keyword-import">import</span> drive

<span class="token keyword keyword-def">def</span> <span class="token function">show_local_mp4_video</span><span class="token punctuation">(</span>file_name<span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">320</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">240</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
  video_encoded <span class="token operator">=</span> base64<span class="token punctuation">.</span>b64encode<span class="token punctuation">(</span>io<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span>file_name<span class="token punctuation">,</span> <span class="token string">'rb'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
  <span class="token keyword keyword-return">return</span> HTML<span class="token punctuation">(</span>data<span class="token operator">=</span><span class="token triple-quoted-string string">'''
    &lt;video width="{0}" height="{1}" alt="test" controls&gt;
        &lt;source src="data:video/mp4;base64,{2}" type="video/mp4" /&gt;
    &lt;/video&gt;'''</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>width<span class="token punctuation">,</span> height<span class="token punctuation">,</span> video_encoded<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'ascii'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 

<span class="token comment"># drive.mount('/content/gdrive', force_remount=True)</span>
movie <span class="token operator">=</span> <span class="token string">'galaxy'</span>
video_path <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f'/content/</span><span class="token interpolation"><span class="token punctuation">{</span>movie<span class="token punctuation">}</span></span><span class="token string">.mp4'</span></span>
show_local_mp4_video<span class="token punctuation">(</span>video_path<span class="token punctuation">)</span>
</code></pre><ol start="6">
<li>セル横の再生ボタンで、実行する<br>
<img src="./img/movie.png" width="80%"></li>
<li>アレンジ：　他の動画に差し変えていろいろ楽しむ</li>
</ol>
<hr>
<div style="page-break-before:always"></div>
<h2 id="テーマ1--colabで-the-laughing-man">テーマ1.  Colabで The Laughing Man </h2>
<pre class="language-text">【実施すること】　深層機械学習（ディープラーニング）
　・Webカメラ動画から、人の姿勢推定し顔の中心（鼻）を位置検出
</pre>
<p>デモ実演： Colabで <strong>The Laughing Man2024/02</strong></p>
<pre class="language-text">2024/2　The Laughing Man (笑い男事件発生)
https://thelaughingman2024.jp/
</pre>
<pre data-role="codeBlock" data-info="python" class="language-python python"><code><span class="token keyword keyword-import">import</span> requests
<span class="token keyword keyword-from">from</span> IPython<span class="token punctuation">.</span>display <span class="token keyword keyword-import">import</span> HTML<span class="token punctuation">,</span> display
<span class="token keyword keyword-from">from</span> google<span class="token punctuation">.</span>colab <span class="token keyword keyword-import">import</span> files

html <span class="token operator">=</span> <span class="token triple-quoted-string string">'''
&lt;!DOCTYPE HTML&gt;
&lt;html&gt;&lt;head&gt;
  &lt;meta charset="UTF-8"&gt;
  &lt;title&gt;PoseNet example using p5.js&lt;/title&gt;
  &lt;script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.3.1/p5.min.js" crossorigin=""&gt;&lt;/script&gt;
  &lt;script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.3.1/addons/p5.dom.min.js" crossorigin=""&gt;&lt;/script&gt;
  &lt;script src="https://unpkg.com/ml5@latest" type="text/javascript" crossorigin=""&gt;&lt;/script&gt;

&lt;/head&gt;
&lt;body&gt;
  &lt;h2&gt;2024/2　The Laughing Man 事件発生&lt;/h2&gt;
  &lt;hr&gt;
  &lt;!-- &lt;p id="status"&gt;Loading model...&lt;/p&gt;
       &lt;button onclick="setup()"&gt;起動&lt;/button&gt;  --&gt;
&lt;script&gt;
let video;
let poseNet;
let poses = [];
let icon;
let iconSize = 120;

function setup() {
  createCanvas(480, 360);

  video = createCapture(VIDEO);
  video.size(width, height);
 　　// url = "https://thelaughingman2024.jp/assets/img/img_mark_04.gif";
  url = "./img_mark_04.gif";

  icon = loadImage(url);
  poseNet = ml5.poseNet(video, modelReady);
  poseNet.on('pose', function(results) {
    poses = results;
  });

  video.hide();
}

function modelReady() {
}

function drawIcon() {
  for (let i = 0; i &lt; poses.length; i++) {
    let pose = poses[i].pose;
    let nose = pose.keypoints[0];
    if (nose.score &gt; 0.2) {
      let x = nose.position.x;
      let y = nose.position.y;
      let ix = x - iconSize / 2;
      let iy = y - iconSize / 2;
      ix = constrain(ix, 0, width - iconSize);
      iy = constrain(iy, 0, height - iconSize);
      image(icon, ix, iy, iconSize, iconSize);
    }
  }
}

function draw() {
  image(video, 0, 0, width, height);
  drawIcon();
}

&lt;/script&gt;
&lt;/body&gt;&lt;/html&gt;
'''</span>
<span class="token comment"># display(HTML(html))</span>

<span class="token keyword keyword-with">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'index.html'</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">)</span> <span class="token keyword keyword-as">as</span> f<span class="token punctuation">:</span>
  f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>html<span class="token punctuation">)</span>
files<span class="token punctuation">.</span>download<span class="token punctuation">(</span><span class="token string">'index.html'</span><span class="token punctuation">)</span>

url <span class="token operator">=</span> <span class="token string">"https://thelaughingman2024.jp/assets/img/img_mark_04.gif"</span><span class="token punctuation">;</span>
response <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">)</span>
save_name <span class="token operator">=</span> <span class="token string">"img_mark_04.gif"</span>
<span class="token builtin">file</span> <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span>save_name<span class="token punctuation">,</span> <span class="token string">"wb"</span><span class="token punctuation">)</span>

<span class="token keyword keyword-for">for</span> chunk <span class="token keyword keyword-in">in</span> response<span class="token punctuation">.</span>iter_content<span class="token punctuation">(</span><span class="token number">100000</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token builtin">file</span><span class="token punctuation">.</span>write<span class="token punctuation">(</span>chunk<span class="token punctuation">)</span>
<span class="token builtin">file</span><span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
files<span class="token punctuation">.</span>download<span class="token punctuation">(</span>save_name<span class="token punctuation">)</span>

port<span class="token punctuation">,</span>path <span class="token operator">=</span> <span class="token number">8000</span><span class="token punctuation">,</span><span class="token string">''</span>
</code></pre><pre data-role="codeBlock" data-info="" class="language-text text"><code>!nohup python3 -m http.server $port &gt; server.log 2&gt;&amp;1 &amp;

google.colab.output.serve_kernel_port_as_iframe(port, path=path)
</code></pre><img src="./img/laughing.png" width="40%">
<hr>
<div style="page-break-before:always"></div>
<h2 id="テーマ2--現在地の近傍地図--操作説明で使用hand0">テーマ2.  現在地の近傍地図  <a href="https://github.com/keythrive/SHSH/blob/main/notebooks/Address2GeoLL.ipynb">操作説明で使用</a> </h2>
<pre class="language-text">【実施すること】　クラウド環境Pythonプログラムを実行し、
 - Webブラウザ上に、現在地近傍の地図を表示
 - 拡大縮小可能な地図で簡単な道案内、ナビに利用できる
 - 住所から緯度経度の取得に失敗する場合、予めWebサイトで緯度経度を求めておく
</pre>
<ol>
<li>地図表示に必要なPythonパッケージをインストール</li>
</ol>
<p><code>!pip install geopy folium xmltodict</code></p>
<ol start="2">
<li>下記のコードを入力して実行</li>
</ol>
<pre data-role="codeBlock" data-info="python" class="language-python python"><code><span class="token keyword keyword-import">import</span> requests
<span class="token keyword keyword-import">import</span> xmltodict
<span class="token keyword keyword-import">import</span> folium

GeospatialUrl <span class="token operator">=</span> <span class="token string">"http://geocode.csis.u-tokyo.ac.jp/cgi-bin/simple_geocode.cgi?output=json&amp;addr="</span>

<span class="token keyword keyword-def">def</span> <span class="token function">address2geo</span><span class="token punctuation">(</span>address<span class="token punctuation">)</span><span class="token punctuation">:</span>
  lat<span class="token punctuation">,</span>lng <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span>
  s_quote <span class="token operator">=</span> requests<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>quote<span class="token punctuation">(</span>address<span class="token punctuation">)</span>
  response <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>GeospatialUrl <span class="token operator">+</span> s_quote<span class="token punctuation">)</span>
  <span class="token keyword keyword-if">if</span> response<span class="token punctuation">.</span>status_code <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">:</span>
     json_data <span class="token operator">=</span> xmltodict<span class="token punctuation">.</span>parse<span class="token punctuation">(</span>response<span class="token punctuation">.</span>text<span class="token punctuation">)</span>
     data <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span>json_data<span class="token punctuation">)</span>
     result <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token string">'results'</span><span class="token punctuation">]</span>
     lat <span class="token operator">=</span> result<span class="token punctuation">[</span><span class="token string">"candidate"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'latitude'</span><span class="token punctuation">]</span>
     lng <span class="token operator">=</span> result<span class="token punctuation">[</span><span class="token string">"candidate"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'longitude'</span><span class="token punctuation">]</span>
  <span class="token keyword keyword-else">else</span><span class="token punctuation">:</span>
     <span class="token keyword keyword-print">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Error: </span><span class="token interpolation"><span class="token punctuation">{</span>response<span class="token punctuation">.</span>status_code<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
  <span class="token keyword keyword-return">return</span> lat<span class="token punctuation">,</span>lng

<span class="token keyword keyword-def">def</span> <span class="token function">test_map</span><span class="token punctuation">(</span>scale<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
  niigata <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">37.916192</span><span class="token punctuation">,</span><span class="token number">139.036413</span><span class="token punctuation">]</span>
  address_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"新潟県新潟市中央区米山3-1-53"</span><span class="token punctuation">,</span> <span class="token string">"新潟県新発田市豊町3丁目7-6"</span><span class="token punctuation">]</span>

  <span class="token keyword keyword-for">for</span> a <span class="token keyword keyword-in">in</span> address_list<span class="token punctuation">:</span>
     <span class="token builtin">map</span> <span class="token operator">=</span> folium<span class="token punctuation">.</span>Map<span class="token punctuation">(</span>location<span class="token operator">=</span>niigata<span class="token punctuation">,</span> zoom_start<span class="token operator">=</span>scale<span class="token punctuation">)</span>
     lat<span class="token punctuation">,</span>lng <span class="token operator">=</span> address2geo<span class="token punctuation">(</span>a<span class="token punctuation">)</span>
     folium<span class="token punctuation">.</span>Marker<span class="token punctuation">(</span><span class="token punctuation">[</span>lat<span class="token punctuation">,</span>lng<span class="token punctuation">]</span><span class="token punctuation">,</span> popup<span class="token operator">=</span>a<span class="token punctuation">)</span><span class="token punctuation">.</span>add_to<span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">)</span>
  <span class="token keyword keyword-return">return</span> <span class="token builtin">map</span>

test_map<span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span>
</code></pre><img src="./img/map-location.png" width="90%">
<hr>
<div style="page-break-before:always"></div>
<h2 id="テーマ3--球の体積-モンテカルロ法--ハンズオン1hand1">テーマ3.  球の体積、モンテカルロ法  <a href="https://github.com/keythrive/SHSH/blob/main/notebooks/Funny_3D.ipynb">ハンズオン1</a> </h2>
<pre class="language-text">【実施すること】
　- 3D空間にランダムな点描画で球を表現
　- 球の中に入る確率計算で，　球の体積を見積もる　
　- モンテカルロ法の意義を確認
- 確率分布に従うデータ生成へ
</pre>
<p>球の体積の公式：　　<br>
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>V</mi><mo>=</mo><mfrac><mn>4</mn><mn>3</mn></mfrac><mi>π</mi><msup><mi>r</mi><mn>3</mn></msup></mrow><annotation encoding="application/x-tex">V = \frac{4}{3} \pi  r^3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">4</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span>　<br>
（r=1 半径１の理論値 V=4.1887902047863905）</p>
<pre data-role="codeBlock" data-info="python" class="language-python python"><code><span class="token keyword keyword-import">import</span> math
<span class="token number">4</span> <span class="token operator">*</span> math<span class="token punctuation">.</span>pi <span class="token operator">/</span> <span class="token number">3</span>　 <span class="token comment"># 理論値:4.1887902047863905</span>
</code></pre><ol>
<li>下記コード入力して，実行　　（視点は固定）</li>
</ol>
<pre data-role="codeBlock" data-info="python" class="language-python python"><code><span class="token keyword keyword-import">import</span> numpy <span class="token keyword keyword-as">as</span> np
<span class="token keyword keyword-import">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword keyword-as">as</span> plt
<span class="token keyword keyword-from">from</span> mpl_toolkits<span class="token punctuation">.</span>mplot3d <span class="token keyword keyword-import">import</span> Axes3D

r<span class="token punctuation">,</span>n <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">10000</span>

x <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>uniform<span class="token punctuation">(</span><span class="token operator">-</span>r<span class="token punctuation">,</span> r<span class="token punctuation">,</span> n<span class="token punctuation">)</span> 
y <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>uniform<span class="token punctuation">(</span><span class="token operator">-</span>r<span class="token punctuation">,</span> r<span class="token punctuation">,</span> n<span class="token punctuation">)</span> 
z <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>uniform<span class="token punctuation">(</span><span class="token operator">-</span>r<span class="token punctuation">,</span> r<span class="token punctuation">,</span> n<span class="token punctuation">)</span> 
d <span class="token operator">=</span> np<span class="token punctuation">.</span>sqrt<span class="token punctuation">(</span>x<span class="token operator">**</span><span class="token number">2</span> <span class="token operator">+</span> y<span class="token operator">**</span><span class="token number">2</span> <span class="token operator">+</span> z<span class="token operator">**</span><span class="token number">2</span><span class="token punctuation">)</span> 
inside <span class="token operator">=</span> d <span class="token operator">&lt;</span> r   <span class="token comment"># 単位球の内部か否か</span>

volume <span class="token operator">=</span> <span class="token number">8</span> <span class="token operator">*</span> np<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span>inside<span class="token punctuation">)</span> <span class="token operator">/</span> n 
<span class="token keyword keyword-print">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"球の体積の近似値：</span><span class="token interpolation"><span class="token punctuation">{</span>volume<span class="token punctuation">:</span><span class="token format-spec">.4f</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span> <span class="token comment"># 球の体積の近似値：4.2552</span>

fig <span class="token operator">=</span> plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
ax <span class="token operator">=</span> fig<span class="token punctuation">.</span>add_subplot<span class="token punctuation">(</span><span class="token number">111</span><span class="token punctuation">,</span> projection<span class="token operator">=</span><span class="token string">"3d"</span><span class="token punctuation">)</span> 
ax<span class="token punctuation">.</span>scatter<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">,</span> c<span class="token operator">=</span>inside<span class="token punctuation">,</span> cmap<span class="token operator">=</span><span class="token string">"coolwarm"</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0.5</span><span class="token punctuation">)</span> 

ax<span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Monte Carlo method for sphere volume (n=</span><span class="token interpolation"><span class="token punctuation">{</span>n<span class="token punctuation">}</span></span><span class="token string">)"</span></span><span class="token punctuation">)</span> 
ax<span class="token punctuation">.</span>set_box_aspect<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span> 
</code></pre><img src="./img/sphere.png" width="60%">
<ol start="2">
<li>グラフィクスを plotlyに変更　（視点をマウス操作で自由に変えられる）</li>
</ol>
<pre data-role="codeBlock" data-info="python" class="language-python python"><code><span class="token keyword keyword-import">import</span> numpy <span class="token keyword keyword-as">as</span> np
<span class="token keyword keyword-import">import</span> plotly<span class="token punctuation">.</span>express <span class="token keyword keyword-as">as</span> px

r<span class="token punctuation">,</span>n <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">10000</span>

x <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>uniform<span class="token punctuation">(</span><span class="token operator">-</span>r<span class="token punctuation">,</span> r<span class="token punctuation">,</span> n<span class="token punctuation">)</span> 
y <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>uniform<span class="token punctuation">(</span><span class="token operator">-</span>r<span class="token punctuation">,</span> r<span class="token punctuation">,</span> n<span class="token punctuation">)</span> 
z <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>uniform<span class="token punctuation">(</span><span class="token operator">-</span>r<span class="token punctuation">,</span> r<span class="token punctuation">,</span> n<span class="token punctuation">)</span> 
d <span class="token operator">=</span> np<span class="token punctuation">.</span>sqrt<span class="token punctuation">(</span>x<span class="token operator">**</span><span class="token number">2</span> <span class="token operator">+</span> y<span class="token operator">**</span><span class="token number">2</span> <span class="token operator">+</span> z<span class="token operator">**</span><span class="token number">2</span><span class="token punctuation">)</span> 
inside <span class="token operator">=</span> d <span class="token operator">&lt;</span> r 

volume <span class="token operator">=</span> <span class="token number">8</span> <span class="token operator">*</span> np<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span>inside<span class="token punctuation">)</span> <span class="token operator">/</span> n 
<span class="token keyword keyword-print">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"球の体積の近似値：　</span><span class="token interpolation"><span class="token punctuation">{</span>volume<span class="token punctuation">:</span><span class="token format-spec">.4f</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>

fig <span class="token operator">=</span> px<span class="token punctuation">.</span>scatter_3d<span class="token punctuation">(</span>x<span class="token operator">=</span>x<span class="token punctuation">,</span> y<span class="token operator">=</span>y<span class="token punctuation">,</span> z<span class="token operator">=</span>z<span class="token punctuation">,</span> color<span class="token operator">=</span>inside<span class="token punctuation">,</span> color_continuous_scale<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">"lightblue"</span><span class="token punctuation">,</span> <span class="token string">"darkblue"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> opacity<span class="token operator">=</span><span class="token number">0.5</span><span class="token punctuation">)</span> 
fig<span class="token punctuation">.</span>update_layout<span class="token punctuation">(</span>title<span class="token operator">=</span><span class="token string-interpolation"><span class="token string">f"Monte Carlo method for sphere volume (n=</span><span class="token interpolation"><span class="token punctuation">{</span>n<span class="token punctuation">}</span></span><span class="token string">)"</span></span><span class="token punctuation">,</span> scene<span class="token operator">=</span><span class="token builtin">dict</span><span class="token punctuation">(</span>xaxis_title<span class="token operator">=</span><span class="token string">"x"</span><span class="token punctuation">,</span> yaxis_title<span class="token operator">=</span><span class="token string">"y"</span><span class="token punctuation">,</span> zaxis_title<span class="token operator">=</span><span class="token string">"z"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
fig<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span> 
</code></pre><pre data-role="codeBlock" data-info="" class="language-text text"><code>   モンテカルロ法試算結果：　球の体積の近似値：4.1912
</code></pre><img src="./img/MC-sphere.png" width="100%">
<hr>
<div style="page-break-before:always"></div>
<h2 id="テーマ4--pythonで-3dグラフ表示">テーマ4.  Pythonで 3Dグラフ表示 </h2>
<pre class="language-text">【実施すること】
- 　3Dプリンタの積層方式で図形を立体化  (視点固定)
- 　3Dプリンタの積層方式で図形を立体化  (視点変更可能)
</pre>
<pre data-role="codeBlock" data-info="python" class="language-python python"><code><span class="token keyword keyword-import">import</span> numpy <span class="token keyword keyword-as">as</span> np
<span class="token keyword keyword-import">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword keyword-as">as</span> plt

t <span class="token operator">=</span> np<span class="token punctuation">.</span>linspace<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token operator">*</span> np<span class="token punctuation">.</span>pi<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
x <span class="token operator">=</span> <span class="token number">16</span> <span class="token operator">*</span> np<span class="token punctuation">.</span>sin<span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token operator">**</span> <span class="token number">3</span>
y <span class="token operator">=</span> <span class="token number">13</span> <span class="token operator">*</span> np<span class="token punctuation">.</span>cos<span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">5</span> <span class="token operator">*</span> np<span class="token punctuation">.</span>cos<span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> t<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">2</span> <span class="token operator">*</span> np<span class="token punctuation">.</span>cos<span class="token punctuation">(</span><span class="token number">3</span> <span class="token operator">*</span> t<span class="token punctuation">)</span> <span class="token operator">-</span> np<span class="token punctuation">.</span>cos<span class="token punctuation">(</span><span class="token number">4</span> <span class="token operator">*</span> t<span class="token punctuation">)</span>

fig <span class="token operator">=</span> plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span><span class="token punctuation">)</span>
ax <span class="token operator">=</span> fig<span class="token punctuation">.</span>add_subplot<span class="token punctuation">(</span>projection<span class="token operator">=</span><span class="token string">'3d'</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string">'Heart Curve 3D'</span><span class="token punctuation">)</span>

<span class="token comment"># Z軸方向に曲線を積層: 3Dプリンタ方式　　（視点は固定）</span>
<span class="token keyword keyword-for">for</span> z <span class="token keyword keyword-in">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 金色からセピア色に変化</span>
    r <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">-</span> <span class="token number">0.24</span> <span class="token operator">*</span> z <span class="token operator">/</span> <span class="token number">10</span>
    g <span class="token operator">=</span> <span class="token number">0.84</span> <span class="token operator">-</span> <span class="token number">0.15</span> <span class="token operator">*</span> z <span class="token operator">/</span> <span class="token number">10</span>
    b <span class="token operator">=</span> <span class="token number">0</span> <span class="token operator">+</span> <span class="token number">0.56</span> <span class="token operator">*</span> z <span class="token operator">/</span> <span class="token number">10</span>
    <span class="token comment"># 線の色をグラデーションにする</span>
    ax<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">,</span> linewidth<span class="token operator">=</span><span class="token number">16</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> g<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><img src="./img/3d-heart.png" width="50%">
<hr>
<pre data-role="codeBlock" data-info="python" class="language-python python"><code><span class="token keyword keyword-import">import</span> numpy <span class="token keyword keyword-as">as</span> np
<span class="token keyword keyword-import">import</span> plotly<span class="token punctuation">.</span>graph_objects <span class="token keyword keyword-as">as</span> go
t <span class="token operator">=</span> np<span class="token punctuation">.</span>linspace<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token operator">*</span> np<span class="token punctuation">.</span>pi<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
x <span class="token operator">=</span> <span class="token number">16</span> <span class="token operator">*</span> np<span class="token punctuation">.</span>sin<span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token operator">**</span> <span class="token number">3</span>
y <span class="token operator">=</span> <span class="token number">13</span> <span class="token operator">*</span> np<span class="token punctuation">.</span>cos<span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">5</span> <span class="token operator">*</span> np<span class="token punctuation">.</span>cos<span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> t<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">2</span> <span class="token operator">*</span> np<span class="token punctuation">.</span>cos<span class="token punctuation">(</span><span class="token number">3</span> <span class="token operator">*</span> t<span class="token punctuation">)</span> <span class="token operator">-</span> np<span class="token punctuation">.</span>cos<span class="token punctuation">(</span><span class="token number">4</span> <span class="token operator">*</span> t<span class="token punctuation">)</span>

fig <span class="token operator">=</span> go<span class="token punctuation">.</span>Figure<span class="token punctuation">(</span><span class="token punctuation">)</span>
fig<span class="token punctuation">.</span>update_layout<span class="token punctuation">(</span>title<span class="token operator">=</span><span class="token string">'Heart Curve 3D'</span><span class="token punctuation">,</span> scene<span class="token operator">=</span><span class="token builtin">dict</span><span class="token punctuation">(</span>xaxis_title<span class="token operator">=</span><span class="token string">'X'</span><span class="token punctuation">,</span> yaxis_title<span class="token operator">=</span><span class="token string">'Y'</span><span class="token punctuation">,</span> zaxis_title<span class="token operator">=</span><span class="token string">'Z'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment"># Z軸方向に曲線を積層: 3Dプリンタ方式　（視点変更可能）</span>
<span class="token keyword keyword-for">for</span> z <span class="token keyword keyword-in">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    fig<span class="token punctuation">.</span>add_trace<span class="token punctuation">(</span>go<span class="token punctuation">.</span>Scatter3d<span class="token punctuation">(</span>x<span class="token operator">=</span>x<span class="token punctuation">,</span> y<span class="token operator">=</span>y<span class="token punctuation">,</span> z<span class="token operator">=</span><span class="token punctuation">[</span>z<span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token builtin">len</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span> mode<span class="token operator">=</span><span class="token string">'lines'</span><span class="token punctuation">,</span> line<span class="token operator">=</span><span class="token builtin">dict</span><span class="token punctuation">(</span>colorscale<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'green'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token string">'red'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token string">'rgb(0, 0, 255)'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> cmin<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> cmax<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span>width<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    x <span class="token operator">=</span> x <span class="token operator">*</span> <span class="token number">0.91</span> 
    y <span class="token operator">=</span> y <span class="token operator">*</span> <span class="token number">0.91</span>
fig<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><img src="./img/3D-plotly-heart.png" width="70%">
<hr>
<div style="page-break-before:always"></div>
<h2 id="テーマ5--wordcloud-ワードクラウド--ハンズオン2hand2">テーマ5.  WordCloud ワードクラウド  <a href="https://github.com/keythrive/SHSH/blob/main/notebooks/TFIDF_WordCloud.ipynb">ハンズオン2</a> </h2>
<pre class="language-text">【実施すること】 小説などテキストで頻出する単語を視覚表現
 - 例えば，源氏物語、枕草子、三国志、現代訳論語...
 - どんなキーワードがどれくらいの数で登場するか？
 - 視覚的に表現し，鑑賞して楽しむ
</pre>
<h4 id="源氏物語---omit-in-toc--">源氏物語 <!-- omit in toc --> </h4>
<img src="./img/wc-源氏物語.png" width="50%">
<h4 id="枕草子---omit-in-toc--">枕草子 <!-- omit in toc --> </h4>
<img src="./img/wc-枕草子-wikipedia.png" width="50%">
<h4 id="三国志---omit-in-toc--">三国志 <!-- omit in toc --> </h4>
<img src="./img/wc-三国志.png" width="50%">
<h4 id="現代訳論語--omit-in-toc--">現代訳論語<!-- omit in toc --> </h4>
<img src="./img/wc-現代訳論語.png" width="50%">
<ul>
<li>事前準備、各種パッケージや日本語フォントのインストール</li>
<li>（約１分ほどかかります）</li>
</ul>
<pre data-role="codeBlock" data-info="" class="language-text text"><code>!apt install aptitude

!aptitude install git make curl xz-utils file -y
!aptitude install mecab libmecab-dev mecab-ipadic-utf8 -y
!apt-get -y install fonts-ipafont-gothic
!pip3 install mecab-python3==0.7
</code></pre><pre data-role="codeBlock" data-info="python" class="language-python python"><code><span class="token keyword keyword-import">import</span> os<span class="token punctuation">.</span>path
<span class="token keyword keyword-import">import</span> glob
<span class="token keyword keyword-import">import</span> re
<span class="token keyword keyword-import">import</span> pandas <span class="token keyword keyword-as">as</span> pd
<span class="token keyword keyword-import">import</span> zipfile
<span class="token keyword keyword-import">import</span> urllib<span class="token punctuation">.</span>request
<span class="token keyword keyword-import">import</span> IPython
<span class="token keyword keyword-from">from</span> IPython<span class="token punctuation">.</span>display <span class="token keyword keyword-import">import</span> Image<span class="token punctuation">,</span> display
<span class="token keyword keyword-from">from</span> sklearn<span class="token punctuation">.</span>feature_extraction<span class="token punctuation">.</span>text <span class="token keyword keyword-import">import</span> TfidfVectorizer
<span class="token keyword keyword-from">from</span> wordcloud <span class="token keyword keyword-import">import</span> WordCloud
<span class="token keyword keyword-import">import</span> MeCab

fpath <span class="token operator">=</span> <span class="token string">'/usr/share/fonts/opentype/ipafont-gothic/ipagp.ttf'</span>
wc <span class="token operator">=</span> WordCloud<span class="token punctuation">(</span>background_color<span class="token operator">=</span><span class="token string">'ivory'</span><span class="token punctuation">,</span>width<span class="token operator">=</span><span class="token number">480</span><span class="token punctuation">,</span>height<span class="token operator">=</span><span class="token number">360</span><span class="token punctuation">,</span>font_path<span class="token operator">=</span>fpath<span class="token punctuation">)</span>

<span class="token keyword keyword-def">def</span> <span class="token function">download</span><span class="token punctuation">(</span>URL<span class="token punctuation">)</span><span class="token punctuation">:</span>
    zip_file <span class="token operator">=</span> re<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">r'/'</span><span class="token punctuation">,</span> URL<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>
    urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>urlretrieve<span class="token punctuation">(</span>URL<span class="token punctuation">,</span> zip_file<span class="token punctuation">)</span>
    <span class="token builtin">dir</span> <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>splitext<span class="token punctuation">(</span>zip_file<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
    <span class="token keyword keyword-with">with</span> zipfile<span class="token punctuation">.</span>ZipFile<span class="token punctuation">(</span>zip_file<span class="token punctuation">)</span> <span class="token keyword keyword-as">as</span> zip_object<span class="token punctuation">:</span>
        zip_object<span class="token punctuation">.</span>extractall<span class="token punctuation">(</span><span class="token builtin">dir</span><span class="token punctuation">)</span>
    os<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>zip_file<span class="token punctuation">)</span>
    path <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token builtin">dir</span><span class="token punctuation">,</span><span class="token string">'*.txt'</span><span class="token punctuation">)</span>
    <span class="token builtin">list</span> <span class="token operator">=</span> glob<span class="token punctuation">.</span>glob<span class="token punctuation">(</span>path<span class="token punctuation">)</span>
    <span class="token keyword keyword-return">return</span> <span class="token builtin">list</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>

<span class="token keyword keyword-def">def</span> <span class="token function">convert</span><span class="token punctuation">(</span>download_text<span class="token punctuation">)</span><span class="token punctuation">:</span>
    data <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span>download_text<span class="token punctuation">,</span> <span class="token string">'rb'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>
    text <span class="token operator">=</span> data<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'shift_jis'</span><span class="token punctuation">)</span>
    text <span class="token operator">=</span> re<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">r'\-{5,}'</span><span class="token punctuation">,</span> text<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>
    text <span class="token operator">=</span> re<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">r'底本：'</span><span class="token punctuation">,</span> text<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
    text <span class="token operator">=</span> re<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">r'［＃改ページ］'</span><span class="token punctuation">,</span> text<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
    text <span class="token operator">=</span> re<span class="token punctuation">.</span>sub<span class="token punctuation">(</span><span class="token string">r'《.+?》'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> text<span class="token punctuation">)</span>
    text <span class="token operator">=</span> re<span class="token punctuation">.</span>sub<span class="token punctuation">(</span><span class="token string">r'［＃.+?］'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> text<span class="token punctuation">)</span>
    text <span class="token operator">=</span> re<span class="token punctuation">.</span>sub<span class="token punctuation">(</span><span class="token string">r'｜'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> text<span class="token punctuation">)</span>
    text <span class="token operator">=</span> re<span class="token punctuation">.</span>sub<span class="token punctuation">(</span><span class="token string">r'\r\n'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> text<span class="token punctuation">)</span>
    text <span class="token operator">=</span> re<span class="token punctuation">.</span>sub<span class="token punctuation">(</span><span class="token string">r'\u3000'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> text<span class="token punctuation">)</span>
    text <span class="token operator">=</span> re<span class="token punctuation">.</span>sub<span class="token punctuation">(</span><span class="token string">r'「'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> text<span class="token punctuation">)</span>
    text <span class="token operator">=</span> re<span class="token punctuation">.</span>sub<span class="token punctuation">(</span><span class="token string">r'」'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> text<span class="token punctuation">)</span>
    text <span class="token operator">=</span> re<span class="token punctuation">.</span>sub<span class="token punctuation">(</span><span class="token string">r'、'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> text<span class="token punctuation">)</span>
    text <span class="token operator">=</span> re<span class="token punctuation">.</span>sub<span class="token punctuation">(</span><span class="token string">r'。'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> text<span class="token punctuation">)</span>
    <span class="token keyword keyword-return">return</span> text

<span class="token keyword keyword-def">def</span> <span class="token function">extract</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">:</span>
    words <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    tagger <span class="token operator">=</span> MeCab<span class="token punctuation">.</span>Tagger<span class="token punctuation">(</span><span class="token string">'-Ochasen'</span><span class="token punctuation">)</span>
    tagger<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
    node <span class="token operator">=</span> tagger<span class="token punctuation">.</span>parseToNode<span class="token punctuation">(</span>text<span class="token punctuation">)</span>
    <span class="token keyword keyword-while">while</span> node<span class="token punctuation">:</span>
        <span class="token keyword keyword-if">if</span> node<span class="token punctuation">.</span>feature<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">u'名詞'</span><span class="token punctuation">:</span>
            words<span class="token punctuation">.</span>append<span class="token punctuation">(</span>node<span class="token punctuation">.</span>surface<span class="token punctuation">)</span>
        node <span class="token operator">=</span> node<span class="token punctuation">.</span><span class="token builtin">next</span>
    text_result <span class="token operator">=</span> <span class="token string">' '</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>words<span class="token punctuation">)</span>
    <span class="token keyword keyword-return">return</span> text_result

<span class="token keyword keyword-def">def</span> <span class="token function">tfidf_fig</span><span class="token punctuation">(</span>title<span class="token punctuation">,</span>url<span class="token punctuation">)</span><span class="token punctuation">:</span>
    download_file <span class="token operator">=</span> download<span class="token punctuation">(</span>url<span class="token punctuation">)</span>
    text <span class="token operator">=</span> convert<span class="token punctuation">(</span>download_file<span class="token punctuation">)</span>
    text <span class="token operator">=</span> extract<span class="token punctuation">(</span>text<span class="token punctuation">)</span>

    wc<span class="token punctuation">.</span>generate<span class="token punctuation">(</span>text<span class="token punctuation">)</span>
    fig <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f'wc-</span><span class="token interpolation"><span class="token punctuation">{</span>title<span class="token punctuation">}</span></span><span class="token string">.png'</span></span>
    wc<span class="token punctuation">.</span>to_file<span class="token punctuation">(</span>fig<span class="token punctuation">)</span>
    <span class="token comment"># IPython.display.Image(fig)</span>
    
    vectorizer <span class="token operator">=</span> TfidfVectorizer<span class="token punctuation">(</span><span class="token punctuation">)</span>
    X <span class="token operator">=</span> vectorizer<span class="token punctuation">.</span>fit_transform<span class="token punctuation">(</span><span class="token punctuation">[</span>text<span class="token punctuation">]</span><span class="token punctuation">)</span>
    values <span class="token operator">=</span> X<span class="token punctuation">.</span>toarray<span class="token punctuation">(</span><span class="token punctuation">)</span>
    feature_names <span class="token operator">=</span> vectorizer<span class="token punctuation">.</span>get_feature_names_out<span class="token punctuation">(</span><span class="token punctuation">)</span>
    df <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>values<span class="token punctuation">,</span> columns <span class="token operator">=</span> feature_names<span class="token punctuation">,</span> index<span class="token operator">=</span><span class="token punctuation">[</span>title<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword keyword-for">for</span> i <span class="token keyword keyword-in">in</span> df<span class="token punctuation">.</span>index<span class="token punctuation">:</span>
       <span class="token keyword keyword-print">print</span><span class="token punctuation">(</span>df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>sort_values<span class="token punctuation">(</span>ascending<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">.</span>head<span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    display<span class="token punctuation">(</span>df<span class="token punctuation">.</span>head<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword keyword-return">return</span> fig

<span class="token comment"># 青空文庫のタイトル、ファイルURL　（追加可能です）</span>
Books <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'源氏物語'</span> <span class="token punctuation">:</span> <span class="token string">'https://www.aozora.gr.jp/cards/000052/files/5016_ruby_9746.zip'</span><span class="token punctuation">,</span>
    <span class="token string">'三国志'</span> <span class="token punctuation">:</span> <span class="token string">'https://www.aozora.gr.jp/cards/001562/files/52409_ruby_51058.zip'</span><span class="token punctuation">,</span>
    <span class="token string">'現代訳論語'</span> <span class="token punctuation">:</span> <span class="token string">'https://www.aozora.gr.jp/cards/001097/files/43785_ruby_58793.zip'</span><span class="token punctuation">,</span>
    <span class="token string">'吾輩は猫である'</span> <span class="token punctuation">:</span> <span class="token string">'https://www.aozora.gr.jp/cards/000148/files/789_ruby_5639.zip'</span><span class="token punctuation">,</span>
    <span class="token string">'三四郎'</span> <span class="token punctuation">:</span> <span class="token string">'https://www.aozora.gr.jp/cards/000148/files/794_ruby_4237.zip'</span><span class="token punctuation">,</span>
    <span class="token string">'こころ'</span> <span class="token punctuation">:</span> <span class="token string">'https://www.aozora.gr.jp/cards/000148/files/773_ruby_5968.zip'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword keyword-def">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
  images <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token keyword keyword-for">for</span> k<span class="token punctuation">,</span>v <span class="token keyword keyword-in">in</span> Books<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    images <span class="token operator">+=</span> <span class="token punctuation">[</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span>tfidf_fig<span class="token punctuation">(</span>k<span class="token punctuation">,</span>v<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>

  <span class="token keyword keyword-for">for</span> fig <span class="token keyword keyword-in">in</span> images<span class="token punctuation">:</span>
    <span class="token keyword keyword-print">print</span><span class="token punctuation">(</span>fig<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    display<span class="token punctuation">(</span>Image<span class="token punctuation">(</span>fig<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

main<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><hr>
<div style="page-break-before:always"></div>
<h2 id="テーマ6-欲しいデータは自分で作るmcmc-ハンズオン3ahand3a--ハンズオン3bhand3b">テーマ6. 欲しいデータは自分で作る（MCMC） <a href="https://github.com/keythrive/SHSH/blob/main/notebooks/MC_Random.ipynb">ハンズオン3a</a> , <a href="https://github.com/keythrive/SHSH/blob/main/notebooks/Ja_En_Mt_sampling.ipynb">ハンズオン3b</a> </h2>
<ul>
<li>
<p>データがなければ、データ分析は始まらない</p>
</li>
<li>
<p>レアなデータは、集めることさえ難しい</p>
</li>
<li>
<p>神（創造主）のみぞしる確率分布</p>
</li>
<li>
<p>エントロピーに逆行し、創生されるデータには偏りがある</p>
</li>
<li>
<p>欲しいデータは、確率分布でサンプリング</p>
</li>
<li>
<p>生成AIに訊いてみる</p>
</li>
<li>
<p>BAD: 生成AIに，データを作ってもらう（NG)</p>
</li>
<li>
<p>GOOD: 生成AIに，データの作り方(考え方)を教えてもらう(OK)</p>
<p>【実施すること】</p>
<ul>
<li>創造主の視点で，高校2年生の英語のテストの成績分布のルールを決める</li>
<li>創造主の視点で，ルールに基づき，得点データを生成する</li>
<li>その方法を，生成AIに質問する</li>
<li>生成AIが作成したPythonコードを実行し，適切な得点データがサンプリングできたか確認する</li>
<li>180度視点を変えて，与えられた得点データを受けとる</li>
<li>得点データの背景にある，神のみぞ知るルールを推定する</li>
<li>ベイズ推定により，神のルールを当てに行く</li>
<li>推定された分布が，神のルールをどれくらい近似しているか確認する</li>
</ul>
</li>
</ul>
<h5 id="創造主の視点-英語の成績データを作る----omit-in-toc--">創造主の視点：　英語の成績データを作る  <!-- omit in toc --> </h5>
<img src="./img/English-Test-Score.png" width="50%">
<h5 id="生成aiに質問してpythonコードとその意味を学ぶ----omit-in-toc--">生成AIに質問して，Pythonコードとその意味を学ぶ  <!-- omit in toc --> </h5>
<p>-　生成AIへの質問文例（プロンプト）</p>
<pre data-role="codeBlock" data-info="" class="language-text text"><code>高校２年生の英語の成績分布をマルコフ連鎖モンテカルロ法でランダムサンプリング生成したいです．
ここでは，２つの正規分布が重なっていると仮定します．
一つは平均55点で分散7点，もう一つは平均75点分散4点と仮定します．
120名の学生の英語の成績分布を作成して，グラフ可視化するPythonコードを教えて下さい．
</code></pre><ul>
<li>生成AIに繰り返し質問しても，良い回答が得られない場合：
<ul>
<li>生成AIは優秀なアシスタントでありえますが，万能ではありません</li>
<li>ピント外れの回答も，堂々巡りも，ハルシネーション（幻覚と言われる「事実にもとづかない情報，実在しない情報を生成する現象」）も少なからずあります</li>
<li>生成AIへの依存・盲信(鵜呑み)は要注意，というより厳禁です</li>
<li>自分の頭で考えて，判断することが軸足です</li>
<li>あくまでも自分自身がプレイヤーであり，</li>
<li>ゴルフの名キャディのように，良いヒントやアドバイスを提供してくれる心強いアシスタント</li>
<li>と捉えれば，ヒントやアドバイスを，判断材料としてしっかり消化吸収して</li>
<li>有限の時間，プレイに最大集中することです</li>
<li>生成AIのアドバイスに限界を感じる前に，</li>
<li>速やかに自分自身で考えて，問題解決に全集中しましょう</li>
</ul>
</li>
</ul>
<h5 id="人間の視点-英語の成績データから神のみぞ知るルールを推定する---omit-in-toc--">人間の視点：　英語の成績データから，神のみぞ知るルールを推定する <!-- omit in toc --> </h5>
<img src="./img/New-Score.png" width="50%">
<img src="./img/Bayes-1.png" width="50%">
<img src="./img/Bayes-2.png" width="50%">
<img src="./img/Bayes-3.png" width="40%">
<h5 id="神のみぞ知るルールを推定した結果----omit-in-toc--">「神のみぞ知る」ルールを推定した結果  <!-- omit in toc --> </h5>
<ul>
<li>1つ目の正規分布は，(平均 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>μ</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">\mu_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">μ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>, 分散 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>σ</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">\sigma_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>) == (74.668,4.3)</li>
<li>もう一つの正規分布は，(平均 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>μ</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">\mu_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">μ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>, 分散 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>σ</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">\sigma_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>) == (53.844,6.5) と推定された．</li>
<li>神モードで，生成AIに依頼した設定を確認：</li>
</ul>
<pre data-role="codeBlock" data-info="python" class="language-python python"><code><span class="token comment"># 正規分布のパラメータを設定</span>
mu1 <span class="token operator">=</span> <span class="token number">55</span> <span class="token comment"># 平均</span>
sigma1 <span class="token operator">=</span> <span class="token number">7</span> <span class="token comment"># 分散</span>
mu2 <span class="token operator">=</span> <span class="token number">75</span> <span class="token comment"># 平均</span>
sigma2 <span class="token operator">=</span> <span class="token number">4</span> <span class="token comment"># 分散</span>
</code></pre><ul>
<li>一連の往復体験が何を意味するか？</li>
<li>演繹： すでに知られたルールがあって，そのルールに従うデータ（具体例）を作る</li>
<li>帰納的推論:  観察された事実（データ）から，その背景にある一般ルールを推定する</li>
<li>機械学習のパラメータ推定: データからルールを学習し，分類・回帰・予測する</li>
<li>サンプリングによるデータ生成: 確率分布（ルール）に従うランダムデータを生成する手法</li>
<li>テストの点数のような1次元データはモンテカルロ法が使える</li>
<li>機械学習で扱う特徴ベクトルは,普通に数100次元データ</li>
<li>数10〜数100次元空間では,ランダムヒット率が極めて低くなる</li>
<li>そこでMCMC：マルコフ連鎖モンテカルロ法，メトロポリスヘイスティングス法，ギブスボルツマンサンプリング・・・につながる</li>
</ul>
<hr>
<div style="page-break-before:always"></div>
<h2 id="テーマ7--量子テレポーテーションって何">テーマ7.  量子テレポーテーションって何？ </h2>
<pre class="language-text">【実施すること】
- 量子テレポーテーションの意味を理解
- 量子ビットは確率状態をもつ　　（指数関数的計算力の源泉，量子重ね合わせ）
- 量子ビットは観測すると確率状態が壊れる
- 量子ビットはコピーできない
- コピーできない量子ビットを観測せずに転送したい (他の誰かに伝えたい)
- 転送装置として量子もつれ（エンタングルメント）を使う
- 量子ゲートを組み立てて表示
</pre>
<pre data-role="codeBlock" data-info="python" class="language-python python"><code>!pip install qiskit qiskit<span class="token operator">-</span>aer
!pip install qiskit<span class="token punctuation">[</span>visualization<span class="token punctuation">]</span>
!pip install <span class="token operator">-</span><span class="token operator">-</span>upgrade pylatexenc

<span class="token comment"># 　一回だけノートブックのカーネルを再起動 　（１回限り）</span>
<span class="token keyword keyword-import">import</span> os
os<span class="token punctuation">.</span>kill<span class="token punctuation">(</span>os<span class="token punctuation">.</span>getpid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span>
</code></pre><pre data-role="codeBlock" data-info="python" class="language-python python"><code><span class="token keyword keyword-from">from</span> qiskit <span class="token keyword keyword-import">import</span> QuantumCircuit<span class="token punctuation">,</span> QuantumRegister<span class="token punctuation">,</span> ClassicalRegister<span class="token punctuation">,</span> execute<span class="token punctuation">,</span> Aer
<span class="token keyword keyword-from">from</span> qiskit<span class="token punctuation">.</span>visualization <span class="token keyword keyword-import">import</span> plot_histogram<span class="token punctuation">,</span> plot_bloch_multivector<span class="token punctuation">,</span> plot_state_qsphere

<span class="token comment"># 3量子ビット</span>
qr <span class="token operator">=</span> QuantumRegister <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
<span class="token comment"># 2古典ビット</span>
crz <span class="token operator">=</span> ClassicalRegister <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
crx <span class="token operator">=</span> ClassicalRegister <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
qc <span class="token operator">=</span> QuantumCircuit <span class="token punctuation">(</span>qr<span class="token punctuation">,</span> crz<span class="token punctuation">,</span> crx<span class="token punctuation">)</span>

<span class="token comment"># アリスが送りたい量子ビットを初期化 （|1&gt;とする）</span>
qc<span class="token punctuation">.</span>x <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>        <span class="token comment"># |0&gt; ビット反転</span>
qc<span class="token punctuation">.</span>barrier <span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># アリスとボブが共有するベル状態ペア</span>
<span class="token comment"># (量子エンタングルメント＝量子もつれ)</span>
qc<span class="token punctuation">.</span>h <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>        <span class="token comment">#  アダマールゲート:   量子重ね合わせ</span>
qc<span class="token punctuation">.</span>cx <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>    <span class="token comment">#  CNOT ：　制御NOTE</span>
qc<span class="token punctuation">.</span>barrier <span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># アリスが自分の量子ビットに操作を施す</span>
qc<span class="token punctuation">.</span>cx <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>     <span class="token comment">#  CNOT ：　制御NOTE</span>
qc<span class="token punctuation">.</span>h <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>         <span class="token comment">#  アダマールゲート:   量子重ね合わせ</span>
qc<span class="token punctuation">.</span>barrier <span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># アリスが自分の量子ビットを測定</span>
<span class="token comment"># 結果を古典レジスタに送る</span>
qc<span class="token punctuation">.</span>measure <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
qc<span class="token punctuation">.</span>measure <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
qc<span class="token punctuation">.</span>barrier <span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># ボブが古典レジスタの値に応じて自分の量子ビットを操作 (if文)</span>
qc<span class="token punctuation">.</span>x <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span>c_if <span class="token punctuation">(</span>crx<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>  <span class="token comment"># アリスからの古典通信が01 → Xゲートでビット反転</span>
qc<span class="token punctuation">.</span>z <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span>c_if <span class="token punctuation">(</span>crz<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>  <span class="token comment"># アリスからの古典通信が10 → Zゲートで位相反転</span>
<span class="token comment"># アリスからの古典通信が11 → ZゲートZゲート（＝＝Yゲート）でビット位相反転</span>
<span class="token comment"># アリスからの古典通信が00 → 何もしなくて，そのままのボブの量子ビットでよい</span>

qc<span class="token punctuation">.</span>draw <span class="token punctuation">(</span>output<span class="token operator">=</span><span class="token string">'mpl'</span><span class="token punctuation">)</span>
</code></pre><img src="./img/Q-gate.png" width="70%">
<pre data-role="codeBlock" data-info="python" class="language-python python"><code>backend <span class="token operator">=</span> Aer<span class="token punctuation">.</span>get_backend<span class="token punctuation">(</span><span class="token string">'statevector_simulator'</span><span class="token punctuation">)</span>
result <span class="token operator">=</span> execute<span class="token punctuation">(</span>qc<span class="token punctuation">,</span> backend<span class="token punctuation">)</span><span class="token punctuation">.</span>result<span class="token punctuation">(</span><span class="token punctuation">)</span>
statevector <span class="token operator">=</span> result<span class="token punctuation">.</span>get_statevector<span class="token punctuation">(</span><span class="token punctuation">)</span>

plot_bloch_multivector<span class="token punctuation">(</span>statevector<span class="token punctuation">)</span>
plot_state_qsphere<span class="token punctuation">(</span>statevector<span class="token punctuation">)</span>
</code></pre><img src="./img/Q-bloch.png" width="40%">
<hr>
<div style="page-break-before:always"></div>
<h2 id="テーマ8--最適化問題を物理法則で解いてもらう">テーマ8.  最適化問題を物理法則で解いてもらう </h2>
<h4 id="焼きなまし法とパラメタ調整のお話1----omit-in-toc--">焼きなまし法とパラメタ調整のお話<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>  <!-- omit in toc --> </h4>
<p>カナダのD-Wave Systems社は，量子焼きなまし法の計算原理を導入したアニーリングマシンD-Waveを開発した企業として有名です<sup class="footnote-ref"><a href="#fn1" id="fnref1:1">[1:1]</a></sup>.<br>
ここでは，D-Wave社が提供する焼きなまし法のPythonパッケージ<code>D-Wave Neal</code>を活用して，最適化問題の求解事例を紹介します．<br>
　続いて，制約条件に違反するペナルティ項の重みパラメータをチューニングすることで，求解の精度を改善する手法を示します．</p>
<h4 id="シミュレーテッドアニーリング焼きなまし法とは---omit-in-toc--">シミュレーテッドアニーリング（焼きなまし法）とは <!-- omit in toc --> </h4>
<p>"刀鍛冶の里"において😉，灼熱に加熱した"玉鋼(たまはがね)"や鉄を冷却する過程で結晶構造が固く結合していく現象に着想を得て，計算機シミュレーションを用いて，最適化問題の解を求める手法を「焼きなまし法」(シミュレーテッドアニーリング,Simulated Annealing,以下SA法)　と言います．<br>
　量子焼きなまし（量子アニーリング,Quantum Annealing，以下QA法）は，量子揺らぎや量子トンネル効果をモチーフに，大域的な最適化解を探す手法です.<br>
下記は，SA法とQA法の比較表です（参考<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup>）</p>
<table>
<thead>
<tr>
<th style="text-align:center">比較観点</th>
<th style="text-align:center">SA法</th>
<th style="text-align:center">QA法</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">探索</td>
<td style="text-align:center">統計熱力学的確率</td>
<td style="text-align:center">量子力学的確率</td>
</tr>
<tr>
<td style="text-align:center">ローカルミニマム脱出</td>
<td style="text-align:center">熱的ゆらぎ</td>
<td style="text-align:center">量子ゆらぎ，量子トンネル効果</td>
</tr>
<tr>
<td style="text-align:center">難易度</td>
<td style="text-align:center">relatively easy</td>
<td style="text-align:center">difficult</td>
</tr>
</tbody>
</table>
<h4 id="最適化問題における制約条件とペナルティ項----omit-in-toc--">最適化問題における制約条件とペナルティ項  <!-- omit in toc --> </h4>
<p>焼きなまし法をざっくりと説明すると，「熱エネルギーや運動位置エネルギーが高い状態を不安定（正解が存在する確率小）」，「エネルギーが最も低い状態を安定（正解が存在する確率大）」とみなして，正解を発見するためにエネルギーが低いところを優先探索するプロセスです．<br>
エネルギーの高低を物理現象にゆだねて，探索範囲を絞り込む考え方です．<br>
　したがって目的関数は正解に近づくほど，制約条件を充足するほど低い値をとるように設計します．逆に，制約違反するケースは高いエネルギー値をペナルティ（罰則）として与えます．<br>
　大域的な最適解を得るために温度を徐々に下げながら局所的な最適解（ローカルミニマム）に陥らないように確率的に探索を行います.</p>
<h4 id="sa法とハイパーパラメタチューニング----omit-in-toc--">SA法とハイパーパラメタチューニング  <!-- omit in toc --> </h4>
<p>目的関数と制約条件の関数は，最終的に一つのエネルギー関数に統合するため，それぞれの制約条件（違反）にどれくらいのペナルティを与えるか？重みバランスを調整する必要があります．<br>
　通常，この重みバランス調整は，プログラミングと実行評価を繰り返しながら，問題の設計者やプログラマの手作業で実行します．<br>
　当然ながら，制約条件の項目数が増えるほど，重みパラメタの調整は複雑です．いわゆる，ランダムサーチやグリッドサーチといった手法で数多くのパラメタの組合せで求解を評価するのも大変な作業です．そこで，手作業に代えてコンピュータ・プログラム自身にハイパーパラメタ調整作業を任せる手法を適用します．具体的には，OptunaというPythonライブラリを活用します</p>
<ul>
<li>
<p>D-Wave neal (<a href="https://docs.ocean.dwavesys.com/projects/neal/en/latest/">https://docs.ocean.dwavesys.com/projects/neal/en/latest/</a>)</p>
<pre data-role="codeBlock" data-info="" class="language-text text"><code>  !python3 -V
  !pip --version
  !pip list | grep neal
  !pip list | grep optuna
</code></pre><pre data-role="codeBlock" data-info="" class="language-text text"><code>  Python 3.8.13
  pip 23.3.1 
  dwave-neal                    0.5.9
  optuna                        3.4.0
</code></pre></li>
<li>
<p>動作検証環境の確認</p>
</li>
</ul>
<pre data-role="codeBlock" data-info="python" class="language-python python"><code><span class="token keyword keyword-import">import</span> neal
<span class="token keyword keyword-import">import</span> pyqubo
<span class="token keyword keyword-import">import</span> optuna

<span class="token comment"># N-Queen問題の設計</span>
<span class="token comment"># A,B,Cがペナルティ項への重みパラメタ</span>
<span class="token keyword keyword-def">def</span> <span class="token function">problem</span><span class="token punctuation">(</span>N<span class="token punctuation">,</span>A<span class="token punctuation">,</span>B<span class="token punctuation">,</span>C<span class="token punctuation">)</span><span class="token punctuation">:</span>    
    rN <span class="token operator">=</span> <span class="token builtin">range</span><span class="token punctuation">(</span>N<span class="token punctuation">)</span>
    
    x <span class="token operator">=</span> pyqubo<span class="token punctuation">.</span>Array<span class="token punctuation">.</span>create<span class="token punctuation">(</span><span class="token string">'x'</span><span class="token punctuation">,</span> shape<span class="token operator">=</span><span class="token punctuation">(</span>N<span class="token punctuation">,</span> N<span class="token punctuation">)</span><span class="token punctuation">,</span> vartype<span class="token operator">=</span><span class="token string">'BINARY'</span><span class="token punctuation">)</span>    
 
    <span class="token comment"># 行の制約条件:  * A</span>
    constraint_rows <span class="token operator">=</span> <span class="token builtin">sum</span><span class="token punctuation">(</span>
        <span class="token punctuation">[</span> <span class="token punctuation">(</span><span class="token builtin">sum</span><span class="token punctuation">(</span>x<span class="token punctuation">[</span>i<span class="token punctuation">,</span> j<span class="token punctuation">]</span> <span class="token keyword keyword-for">for</span> j <span class="token keyword keyword-in">in</span> rN<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">**</span><span class="token number">2</span> <span class="token keyword keyword-for">for</span> i <span class="token keyword keyword-in">in</span> rN <span class="token punctuation">]</span>
    <span class="token punctuation">)</span>
    <span class="token comment"># 列の制約条件:  * B</span>
    constraint_cols <span class="token operator">=</span> <span class="token builtin">sum</span><span class="token punctuation">(</span>
        <span class="token punctuation">[</span> <span class="token punctuation">(</span><span class="token builtin">sum</span><span class="token punctuation">(</span>x<span class="token punctuation">[</span>i<span class="token punctuation">,</span> j<span class="token punctuation">]</span> <span class="token keyword keyword-for">for</span> i <span class="token keyword keyword-in">in</span> rN<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">**</span><span class="token number">2</span> <span class="token keyword keyword-for">for</span> j <span class="token keyword keyword-in">in</span> rN <span class="token punctuation">]</span>
    <span class="token punctuation">)</span>
    <span class="token comment"># 対角線の制約条件(1)</span>
    constraint_diag <span class="token operator">=</span> <span class="token builtin">sum</span><span class="token punctuation">(</span>
        <span class="token punctuation">[</span> <span class="token punctuation">(</span><span class="token builtin">sum</span><span class="token punctuation">(</span>x<span class="token punctuation">[</span>i<span class="token punctuation">,</span> j<span class="token punctuation">]</span> <span class="token keyword keyword-for">for</span> i <span class="token keyword keyword-in">in</span> rN <span class="token keyword keyword-for">for</span> j <span class="token keyword keyword-in">in</span> rN <span class="token keyword keyword-if">if</span> i<span class="token operator">+</span>j <span class="token operator">==</span> k<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">**</span><span class="token number">2</span> 
           <span class="token keyword keyword-for">for</span> k <span class="token keyword keyword-in">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">*</span>N<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">]</span> 
    <span class="token punctuation">)</span>
    <span class="token comment"># + 対角線の制約条件(2)</span>
    <span class="token comment">#      ( (1) + (2) ) * C</span>
    constraint_diag <span class="token operator">+=</span> <span class="token builtin">sum</span><span class="token punctuation">(</span>
        <span class="token punctuation">[</span> <span class="token punctuation">(</span><span class="token builtin">sum</span><span class="token punctuation">(</span>x<span class="token punctuation">[</span>i<span class="token punctuation">,</span> j<span class="token punctuation">]</span> <span class="token keyword keyword-for">for</span> i <span class="token keyword keyword-in">in</span> rN <span class="token keyword keyword-for">for</span> j <span class="token keyword keyword-in">in</span> rN <span class="token keyword keyword-if">if</span> i<span class="token operator">-</span>j <span class="token operator">==</span> k<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">**</span><span class="token number">2</span>
             <span class="token keyword keyword-for">for</span> k <span class="token keyword keyword-in">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">-</span> N<span class="token punctuation">,</span> N<span class="token punctuation">)</span> <span class="token punctuation">]</span>
    <span class="token punctuation">)</span>
    <span class="token comment">#  制約条件の合成 =&gt;　最小値を探す問題    </span>
    H <span class="token operator">=</span> A <span class="token operator">*</span> constraint_rows <span class="token operator">+</span> B <span class="token operator">*</span> constraint_cols <span class="token operator">+</span> C <span class="token operator">*</span> constraint_diag 
    model <span class="token operator">=</span> H<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    qubo<span class="token punctuation">,</span> offset <span class="token operator">=</span> model<span class="token punctuation">.</span>to_qubo<span class="token punctuation">(</span><span class="token punctuation">)</span>   
    <span class="token keyword keyword-return">return</span> qubo<span class="token punctuation">,</span> offset

<span class="token comment"># 求解</span>
<span class="token keyword keyword-def">def</span> <span class="token function">solve</span><span class="token punctuation">(</span>qubo<span class="token punctuation">,</span>times<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    sampler <span class="token operator">=</span> neal<span class="token punctuation">.</span>SimulatedAnnealingSampler<span class="token punctuation">(</span><span class="token punctuation">)</span>
    result <span class="token operator">=</span> sampler<span class="token punctuation">.</span>sample_qubo<span class="token punctuation">(</span>qubo<span class="token punctuation">,</span>num_reads<span class="token operator">=</span>times<span class="token punctuation">)</span>
    solution <span class="token operator">=</span> result<span class="token punctuation">.</span>first<span class="token punctuation">.</span>sample       
    <span class="token keyword keyword-return">return</span> solution

<span class="token comment"># 求解結果の表示</span>
<span class="token keyword keyword-def">def</span> <span class="token function">print_q</span><span class="token punctuation">(</span>sols<span class="token punctuation">,</span>N<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword keyword-def">def</span> <span class="token function">elm</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> <span class="token string">'Q '</span> <span class="token keyword keyword-if">if</span> s<span class="token operator">==</span><span class="token number">1</span> <span class="token keyword keyword-else">else</span> <span class="token string">'_ '</span>
    board <span class="token operator">=</span> <span class="token string">''</span>
    rN <span class="token operator">=</span> <span class="token builtin">range</span><span class="token punctuation">(</span>N<span class="token punctuation">)</span>
    <span class="token keyword keyword-for">for</span> i <span class="token keyword keyword-in">in</span> rN<span class="token punctuation">:</span>
        <span class="token keyword keyword-for">for</span> j <span class="token keyword keyword-in">in</span> rN<span class="token punctuation">:</span>
            board <span class="token operator">+=</span> elm<span class="token punctuation">(</span>sols<span class="token punctuation">[</span><span class="token string-interpolation"><span class="token string">f'x[</span><span class="token interpolation"><span class="token punctuation">{</span>i<span class="token punctuation">}</span></span><span class="token string">][</span><span class="token interpolation"><span class="token punctuation">{</span>j<span class="token punctuation">}</span></span><span class="token string">]'</span></span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        board <span class="token operator">+=</span> <span class="token string">'\n'</span>
    <span class="token keyword keyword-print">print</span><span class="token punctuation">(</span>board<span class="token punctuation">)</span>

<span class="token comment"># 求解結果の検証，制約条件を満たしたか？を数値で答える</span>
<span class="token keyword keyword-def">def</span> <span class="token function">calc_penalty</span><span class="token punctuation">(</span>sol<span class="token punctuation">,</span> qubo<span class="token punctuation">)</span><span class="token punctuation">:</span>
    penalty <span class="token operator">=</span> <span class="token punctuation">[</span> val <span class="token operator">*</span> sol<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">*</span> sol<span class="token punctuation">[</span>j<span class="token punctuation">]</span>
                   <span class="token keyword keyword-for">for</span> <span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">,</span> val <span class="token keyword keyword-in">in</span> qubo<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">]</span>
    <span class="token keyword keyword-return">return</span> <span class="token builtin">sum</span><span class="token punctuation">(</span>penalty<span class="token punctuation">)</span>

<span class="token comment"># 重み係数A,B,Cを与えて求解評価</span>
<span class="token keyword keyword-def">def</span> <span class="token function">trial</span><span class="token punctuation">(</span>A<span class="token punctuation">,</span>B<span class="token punctuation">,</span>C<span class="token punctuation">,</span>N<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">,</span>out<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    Q<span class="token punctuation">,</span>offset <span class="token operator">=</span> problem<span class="token punctuation">(</span>N<span class="token punctuation">,</span>A<span class="token punctuation">,</span>B<span class="token punctuation">,</span>C<span class="token punctuation">)</span>
    sol <span class="token operator">=</span> solve<span class="token punctuation">(</span>Q<span class="token punctuation">)</span>
    <span class="token keyword keyword-if">if</span> out<span class="token punctuation">:</span>
        print_q<span class="token punctuation">(</span>sol<span class="token punctuation">,</span>N<span class="token punctuation">)</span>
    <span class="token keyword keyword-return">return</span><span class="token punctuation">(</span>calc_penalty<span class="token punctuation">(</span>sol<span class="token punctuation">,</span>Q<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment"># # A,B,Cの適切な重みバランスで，パラメタチューニング</span>
<span class="token keyword keyword-def">def</span> <span class="token function">tune</span><span class="token punctuation">(</span>score<span class="token punctuation">,</span>n_trials<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword keyword-def">def</span> <span class="token function">objective</span><span class="token punctuation">(</span>trial<span class="token punctuation">)</span><span class="token punctuation">:</span>
        A <span class="token operator">=</span> trial<span class="token punctuation">.</span>suggest_float<span class="token punctuation">(</span><span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token number">0.9</span><span class="token punctuation">,</span> <span class="token number">1.2</span><span class="token punctuation">)</span>
        B <span class="token operator">=</span> trial<span class="token punctuation">.</span>suggest_float<span class="token punctuation">(</span><span class="token string">'B'</span><span class="token punctuation">,</span> <span class="token number">0.9</span><span class="token punctuation">,</span> <span class="token number">1.2</span><span class="token punctuation">)</span>
        C <span class="token operator">=</span> trial<span class="token punctuation">.</span>suggest_float<span class="token punctuation">(</span><span class="token string">'C'</span><span class="token punctuation">,</span> <span class="token number">0.8</span><span class="token punctuation">,</span> <span class="token number">0.9</span><span class="token punctuation">)</span>
        <span class="token keyword keyword-return">return</span> score<span class="token punctuation">(</span>A<span class="token punctuation">,</span>B<span class="token punctuation">,</span>C<span class="token punctuation">,</span>out<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
    
    study <span class="token operator">=</span> optuna<span class="token punctuation">.</span>create_study<span class="token punctuation">(</span><span class="token punctuation">)</span>    
    study<span class="token punctuation">.</span>optimize<span class="token punctuation">(</span>objective<span class="token punctuation">,</span> n_trials<span class="token operator">=</span>n_trials<span class="token punctuation">,</span>n_jobs<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span>show_progress_bar<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
    <span class="token keyword keyword-print">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'Best params:</span><span class="token interpolation"><span class="token punctuation">{</span>study<span class="token punctuation">.</span>best_params<span class="token punctuation">}</span></span><span class="token string"> =&gt; Best values:</span><span class="token interpolation"><span class="token punctuation">{</span>study<span class="token punctuation">.</span>best_value<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
    <span class="token keyword keyword-return">return</span> study<span class="token punctuation">.</span>best_params

<span class="token keyword keyword-if">if</span> __name__<span class="token operator">==</span><span class="token string">'__main__'</span><span class="token punctuation">:</span>
    bp <span class="token operator">=</span> tune<span class="token punctuation">(</span>trial<span class="token punctuation">)</span>　
    <span class="token comment"># ベストなパラメタで求解評価</span>
    A<span class="token punctuation">,</span>B<span class="token punctuation">,</span>C <span class="token operator">=</span> bp<span class="token punctuation">[</span><span class="token string">'A'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>bp<span class="token punctuation">[</span><span class="token string">'B'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>bp<span class="token punctuation">[</span><span class="token string">'C'</span><span class="token punctuation">]</span>
    trial<span class="token punctuation">(</span>A<span class="token punctuation">,</span>B<span class="token punctuation">,</span>C<span class="token punctuation">,</span>N<span class="token operator">=</span><span class="token number">24</span><span class="token punctuation">,</span>out<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
</code></pre><h4 id="出力結果の一例-n8-trial30回---omit-in-toc--">出力結果の一例　（N＝8，　trial＝3０回） <!-- omit in toc --> </h4>
<pre data-role="codeBlock" data-info="" class="language-text text"><code>[I 2023-12-11 03:52:41,920] Trial 28 finished with value: -32.927880681573406 and parameters: {'A': 1.1550876014852884, 'B': 1.1780997833887736, 'C': 0.8913988501613064}. Best is trial 25 with value: -33.518692834018935.
[I 2023-12-11 03:52:41,941] Trial 29 finished with value: -32.63961820738401 and parameters: {'A': 1.1204543795527726, 'B': 1.1753860344131433, 'C': 0.8920559309785426}. Best is trial 25 with value: -33.518692834018935.
Best params:{'A': 1.1976523005710686, 'B': 1.1974676367562087, 'C': 0.8973583334625448} =&gt; Best values:-33.518692834018935
_ _ Q _ _ _ _ _ 
_ _ _ _ _ Q _ _ 
_ Q _ _ _ _ _ _ 
_ _ _ _ _ _ Q _ 
Q _ _ _ _ _ _ _ 
_ _ _ Q _ _ _ _ 
_ _ _ _ _ _ _ Q 
_ _ _ _ Q _ _ _ 
</code></pre><h4 id="出力結果の一例-n24-trial10回---omit-in-toc--">出力結果の一例　（N＝２４，　trial＝１０回） <!-- omit in toc --> </h4>
<pre data-role="codeBlock" data-info="" class="language-text text"><code>[I 2023-12-10 21:11:11,672] Trial 7 finished with value: -30.543440680477346 and parameters: {'A': 1.0097572501119707, 'B': 1.170226919130268, 'C': 0.8189729579087147}. Best is trial 1 with value: -32.37165960385969.
[I 2023-12-10 21:11:11,796] Trial 8 finished with value: -31.160294185948207 and parameters: {'A': 0.9907434026003465, 'B': 1.1639500849709838, 'C': 0.8701716428360979}. Best is trial 1 with value: -32.37165960385969.
[I 2023-12-10 21:11:11,809] Trial 9 finished with value: -31.879515567617112 and parameters: {'A': 1.083048922646875, 'B': 1.14289295460516, 'C': 0.8794987843500518}. Best is trial 1 with value: -32.37165960385969.
Best params:{'A': 1.1433867723692346, 'B': 1.121662295356157, 'C': 0.8907041913785347} =&gt; Best values:-32.37165960385969
_ _ _ _ _ _ _ _ _ Q _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
_ _ _ _ Q _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ Q _ _ _ _ _ _ _ _ 
_ _ _ _ _ _ _ _ Q _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ Q _ _ _ 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ Q _ _ _ _ _ _ _ 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ Q _ _ _ _ _ _ _ _ _ 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ Q _ 
_ _ _ _ _ _ Q _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
_ _ _ Q _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ Q _ _ _ _ _ _ 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ Q _ _ 
_ _ _ _ _ _ _ _ _ _ _ _ _ Q _ _ _ _ _ _ _ _ _ _ 
_ _ _ _ _ Q _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
_ _ Q _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
Q _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ Q _ _ _ _ _ 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ Q 
_ Q _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
_ _ _ _ _ _ _ _ _ _ _ _ Q _ _ _ _ _ _ _ _ _ _ _ 
_ _ _ _ _ _ _ _ _ _ Q _ _ _ _ _ _ _ _ _ _ _ _ _ 
_ _ _ _ _ _ _ Q _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
_ _ _ _ _ _ _ _ _ _ _ Q _ _ _ _ _ _ _ _ _ _ _ _ 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ Q _ _ _ _ 

</code></pre><hr>
<div style="page-break-before:always"></div>
<h2 id="参考-qiitaサイトへの執筆記事">参考：　Qiitaサイトへの執筆記事 </h2>
<ul>
<li>ちょこっとコーディング：幾何図形や曲線を描く ( <a href="https://qiita.com/khrive/items/f448d982efec17fff063">https://qiita.com/khrive/items/f448d982efec17fff063</a> )</li>
<li>量子ビット： 確率振幅,位相,複素数の関係をStreamlitで可視化 ( <a href="https://qiita.com/khrive/items/25f9d192bcfcfaf82b48">https://qiita.com/khrive/items/25f9d192bcfcfaf82b48</a> )</li>
<li>プログラムの挙動を知るための自動トレース,自動ロギング ( <a href="https://qiita.com/khrive/items/558beedcac583aebbddd">https://qiita.com/khrive/items/558beedcac583aebbddd</a> )</li>
<li>焼きなまし法とパラメタ調整について ( <a href="https://qiita.com/khrive/items/b8e0da331c0c659cb000">https://qiita.com/khrive/items/b8e0da331c0c659cb000</a> )</li>
<li>Fixstars Amplifyで，制約充足問題(N-Queen問題)に挑戦してみた ( <a href="https://qiita.com/khrive/items/78fceb402599ce7fd775">https://qiita.com/khrive/items/78fceb402599ce7fd775</a> )</li>
<li>O'REILLYのPython書籍を７冊ななめ読みしたメタクラスの話( <a href="https://qiita.com/khrive/items/0c3db4a7f96b816bf518">https://qiita.com/khrive/items/0c3db4a7f96b816bf518</a> )</li>
</ul>
<hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p>焼きなまし法とパラメタ調整(<a href="https://qiita.com/khrive/items/b8e0da331c0c659cb000">https://qiita.com/khrive/items/b8e0da331c0c659cb000</a>) <a href="#fnref1" class="footnote-backref">↩︎</a> <a href="#fnref1:1" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn2" class="footnote-item"><p><a href="https://qiita.com/3110atsu1217/items/f74c898c0b669a4fadd7">擬似アニーリングと量子アニーリング</a> <a href="#fnref2" class="footnote-backref">↩︎</a></p>
</li>
</ol>
</section>

      </div>
      
      
    
    
    
    
    
    
  
    </body></html>